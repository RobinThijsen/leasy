window.$=$;Livewire=window.Livewire;class AnimationModal{open;close;init;constructor(variant){switch(variant){case"flyout":this.open={transform:"translateX(0)"};this.close={transform:"translateX(50vw)"};this.init={transform:"translateX(50vw)",display:"none"};break;default:this.open={transform:"scale(1)",opacity:"1"};this.close={transform:"scale(.95)",opacity:"0"};this.init={transform:"scale(.95)",opacity:"0",display:"none"};break}}}class AnimationTip{open;close;init;constructor(position){this.init={display:"none",opacity:"0"};this.open={opacity:"1"};this.close={opacity:"0"};let transform={open:"scale(1)",close:"scale(.95)"};if(position.top){transform.open+=" translateY(0)";transform.close+=" translateY(5px)"}if(position.bottom){transform.open+=" translateY(0)";transform.close+=" translateY(-5px)"}if(position.left){transform.open+=" translateX(0)";transform.close+=" translateX(5px)"}if(position.right){transform.open+=" translateX(0)";transform.close+=" translateX(-5px)"}this.init.transform=transform.close;this.open.transform=transform.open;this.close.transform=transform.close}}class AnimationToastr{open;close;init;constructor(position){switch(position){case"top":case"top-left":case"top-right":this.open={transform:"translateY(0)",opacity:"1"};this.close={transform:"translateY(-30px)",opacity:"0"};this.init={transform:"translateY(-30px)",opacity:"0",display:"none"};break;case"bottom":case"bottom-left":case"bottom-right":this.open={transform:"translateY(0)",opacity:"1"};this.close={transform:"translateY(30px)",opacity:"0"};this.init={transform:"translateY(30px)",opacity:"0",display:"none"};break;default:this.open={display:"flex"};this.close={display:"none"};break}}}Livewire?.directive("autocomplete",function({el,directive,component}){const container=document.querySelector(".autocomplete");const[modelKey,model]=container.getAttribute("data-parent-model").split("|");const input=container.querySelector("[wire\\:autocomplete-input]");const ghost=container.querySelector("[wire\\:autocomplete-ghost]");let count=component.$wire.get("autocompleteCount");let currentKey=component.$wire.get("autocompleteCurrentKey");const show=component.$wire.get("autocompleteShow");if(!show)$(el).addClass("hidden");$(window).on("keydown",event=>{if(event.which===38||event.which===40){event.preventDefault();currentKey=component.$wire.get("autocompleteCurrentKey");count=component.$wire.get("autocompleteCount");console.log(currentKey,count);if(currentKey==null){currentKey=0}else{if(currentKey>count)currentKey=count;else{if(event.which===38&&currentKey>0)currentKey-=1;else if(event.which!==38&&currentKey<count)currentKey+=1}}component.$wire.set("autocompleteCurrentKey",currentKey);el.querySelectorAll("[wire\\:autocomplete-item]").forEach(function(item,index){const key=parseInt(item.getAttribute("wire:autocomplete-item"));if(key===currentKey){if(!$(item).hasClass("autocomplete__resultsContainer__item--active")){$(item).addClass("autocomplete__resultsContainer__item--active")}}else{if($(item).hasClass("autocomplete__resultsContainer__item--active")){$(item).removeClass("autocomplete__resultsContainer__item--active")}}})}else if(event.which===9){event.preventDefault();currentKey=component.$wire.get("autocompleteCurrentKey");count=component.$wire.get("autocompleteCount");if(currentKey!=null)component.$wire.call("select");else component.$wire.call("select",0)}});Livewire?.on("autocomplete.results.updated",function(params){count=component.$wire.get("autocompleteCount");if(count===0&&!$(el).hasClass("hidden")){$(el).addClass("hidden")}});Livewire?.on("autocomplete.show.toggle",function(){const show=component.$wire.get("autocompleteShow");if(!show)ghost.innerHTML="";if(show&&$(el).hasClass("hidden"))$(el).removeClass("hidden");else if(!show&&!$(el).hasClass("hidden"))$(el).addClass("hidden")});Livewire?.on("autocomplete.search.updated",function(){const search=component.$wire.get("autocompleteSearch");component.$wire.set(model,search,modelKey.includes("live"))});Livewire?.on("autocomplete.currentKey.updated",function(params){console.log(params.content);ghost.innerHTML=params.content})});Livewire?.directive("context-trigger",function({el,directive,component}){$(el).on("contextmenu",function(event){event.preventDefault();const contextmenu=document.querySelector('[wire\\:context-menu="'+directive.expression+'"]');if(!contextmenu){console.error("context menu named ["+directive.expression+"] doesn't exist ! Make sur an element with 'wire:context-menu' attribute is set.");return}$(contextmenu).css({top:event.pageY-$(window).scrollTop()+"px",left:event.pageX+"px"});document.querySelectorAll("[wire\\:context-menu]").forEach(function(contextmenu,index){if(contextmenu.getAttribute("wire:context-menu")!=directive.expression){closeContextMenu(contextmenu)}});openContextMenu(contextmenu)})});Livewire?.directive("context-menu",function({el,directive,component}){initContextMenu(el);$("html, body").on("click",function(event){const isopen=el.getAttribute("data-context-open")=="1";if(isopen&&event.target!=el&&!el.contains(event.target)){event.preventDefault();closeContextMenu(el)}})});function initContextMenu(menu){$(menu).css({display:"none",opacity:"0",transform:"scale(.9)"});menu.setAttribute("data-context-open","0")}function openContextMenu(menu){$(menu).css({display:"block"});setTimeout(function(){$(menu).css({opacity:"1",transform:"scale(1)"});menu.setAttribute("data-context-open","1")},1)}function closeContextMenu(menu){$(menu).css({opacity:"0",transform:"scale(.9)"});setTimeout(function(){$(menu).css({display:"none"});menu.setAttribute("data-context-open","0")},200)}Livewire?.directive("lightbox",function({el,directive,component}){$(el).addClass("lightboxElement");const lightboxElement=getLightboxElement();const prevButton=lightboxElement.querySelector(".lightboxContainer__button--prev");const nextButton=lightboxElement.querySelector(".lightboxContainer__button--next");const closeButton=lightboxElement.querySelector(".lightboxContainer__closer");const[property,index]=directive.expression.split("|");let lightbox;if(!lightboxElement||!property){return}$(el).on("click",function(event){const dropdown=el.querySelector("div.dropdown");if(dropdown&&dropdown.contains(event.target)){return}event.preventDefault();lightbox=new Lightbox(component.$wire,property,index);if(lightbox.currentIndex===undefined){lightboxElement.querySelectorAll(".lightboxContainer__button").forEach(button=>{button.remove()})}openLightbox(lightbox.current);checkForArrow(lightbox)});$(prevButton).on("click",function(event){if(lightbox instanceof Lightbox){event.preventDefault();lightbox.dicrement();const lightboxElement=getLightboxElement();const ligthboxContent=lightboxElement.querySelector(".lightboxContainer__content");ligthboxContent.innerHTML="";const attachmentElement=generateElement(lightbox.current);ligthboxContent.appendChild(attachmentElement);checkForArrow(lightbox)}});$(nextButton).on("click",function(event){if(lightbox instanceof Lightbox){event.preventDefault();lightbox.increment();const lightboxElement=getLightboxElement();const ligthboxContent=lightboxElement.querySelector(".lightboxContainer__content");ligthboxContent.innerHTML="";const attachmentElement=generateElement(lightbox.current);ligthboxContent.appendChild(attachmentElement);checkForArrow(lightbox)}});$(closeButton).on("click",function(event){event.preventDefault();lightbox=undefined;closeLightbox(lightboxElement)});$(document).on("click",function(event){if($("body").hasClass("has-lightbox")){if(event.target==lightboxElement){lightbox=undefined;closeLightbox(lightboxElement)}}})});class Attachment{static IMAGE=1;static VIDEO=2;static FILE=3;name;path;size;extension;type;constructor(props){this.name=props.name;this.path=props.path;this.size=props.size;this.extension=props.extension;if(["jpeg","png","jpg","gif","webp"].includes(this.extension)){this.type=Attachment.IMAGE}else if(["mp4","mov"].includes(this.extension)){this.type=Attachment.VIDEO}else{this.type=Attachment.FILE}}}class Lightbox{data;current;currentIndex;constructor(component,property,index){this.data=component.$get(property);this.currentIndex=index?parseInt(index):null;if(this.currentIndex!==null){this.current=new Attachment(this.data[this.currentIndex])}else{this.current=new Attachment(this.data)}}dicrement(){if(this.data[this.currentIndex-1]===undefined){return}this.currentIndex=this.currentIndex-1;this.current=new Attachment(this.data[this.currentIndex])}increment(){if(this.data[this.currentIndex+1]===undefined){return}this.currentIndex=this.currentIndex+1;this.current=new Attachment(this.data[this.currentIndex])}hasPrev(){return this.data[this.currentIndex-1]!=null}hasNext(){return this.data[this.currentIndex+1]!=null}}function openLightbox(attachment){$("body").addClass("has-lightbox");const lightboxElement=getLightboxElement();const ligthboxContent=lightboxElement.querySelector(".lightboxContainer__content");const attachmentElement=generateElement(attachment);ligthboxContent.appendChild(attachmentElement)}function checkForArrow(lightbox){const lightboxElement=getLightboxElement();const prevButton=lightboxElement.querySelector(".lightboxContainer__button--prev");if(lightbox.hasPrev()){$(prevButton).css({visibility:"visible"})}else{$(prevButton).css({visibility:"hidden"})}const nextButton=lightboxElement.querySelector(".lightboxContainer__button--next");if(lightbox.hasNext()){$(nextButton).css({visibility:"visible"})}else{$(nextButton).css({visibility:"hidden"})}}function generateElement(attachment){let attachmentElement;if(attachment.type==Attachment.IMAGE){attachmentElement=document.createElement("img");attachmentElement.src=attachment.path;attachmentElement.alt=attachment.name}else if(attachment.type==Attachment.VIDEO){attachmentElement=document.createElement("video");let attachmentElementSource=document.createElement("source");attachmentElement.controls=true;attachmentElement.preload="auto";attachmentElement.playsinline=true;attachmentElement.autoplay=true;attachmentElementSource.src=attachment.path;attachmentElement.appendChild(attachmentElementSource)}else{attachmentElement=document.createElement("a");attachmentElement.href=attachment.path;attachmentElement.target="_blank";attachmentElement.innerHTML=attachment.name}return attachmentElement}function closeLightbox(el){$("body").removeClass("has-lightbox");const contentElement=el.querySelector("div.lightboxContainer__content");contentElement.innerHTML=""}function getLightboxElement(){return document.querySelector("body > div.lightboxContainer")}Livewire?.directive("modal",function({el,directive,component}){const variant=el.getAttribute("wire:modal-variant");const animations=new AnimationModal(variant);initModal(el,animations.init);$(document).on("keydown",function(event){let isopen=el.getAttribute("data-modal-open")=="1";if(isopen&&event.key=="Escape"){event.preventDefault();closeModal(el,animations.close)}});$("html, body").on("click",function(event){let isopen=el.getAttribute("data-modal-open")=="1";if(isopen&&el!=event.target&&!el.contains(event.target)){event.preventDefault();closeModal(el,animations.close)}});Livewire?.on("open.modal",function(params){let isopen=el.getAttribute("data-modal-open")=="1";if(directive.expression==params.name&&!isopen){openModal(el,animations.open)}});Livewire?.on("close.modal",function(params){let isopen=el.getAttribute("data-modal-open")=="1";if(directive.expression==params.name&&isopen){closeModal(el,animations.close)}})});Livewire?.directive("modal-trigger",function({el,directive,component}){$(el).on("click",function(){let modal=document.querySelector('[wire\\:modal="'+directive.expression+'"]');if(!modal){exception("No modal ["+directive.expression+"] found. Please make sure you have a modal component with same name as your trigger one.",component.$wire,directive.expression);return}let isopen=modal.getAttribute("data-modal-open")=="1";const variant=modal.getAttribute("wire:modal-variant");const animations=new AnimationModal(variant);if(!isopen){openModal(modal,animations.open)}else{closeModal(modal,animations.close)}})});function initModal(modal,animation){modal.setAttribute("data-modal-open","0");$(modal).css(animation)}function openModal(modal,animation){$(modal).css({display:"flex"});$("body").addClass("has-modal");setTimeout(function(){$(modal).css(animation);modal.setAttribute("data-modal-open","1")},1)}function closeModal(modal,animation){$(modal).css(animation);setTimeout(function(){$(modal).css({display:"none"});$("html, body").removeClass("has-modal");modal.setAttribute("data-modal-open","0")},200)}function exception(message,component,name){console.warn(message);component.$call("handler","js-exception",{modal:name})}Livewire?.directive("tip",function({el,directive,component}){el.setAttribute("wire:ignore","");$(el).addClass("tooltip");let message=directive.expression;let position={top:false,bottom:false,left:false,right:false};directive.modifiers.forEach(function(modifier,index){switch(modifier){case"top":position.top=true;break;case"bottom":position.bottom=true;break;case"left":position.left=true;break;case"right":position.right=true;break;default:break}});const animations=new AnimationTip(position);const tip=generateTip(el,message,position);$(tip).css(animations.init);$(el).on("mouseenter",function(event){event.preventDefault();showTip(tip,animations.open)});$(el).on("mouseleave",function(event){event.preventDefault();hideTip(tip,animations.close)})});function generateTip(parent,content,position){const span=document.createElement("span");span.innerHTML=content;$(span).addClass("tooltip__message");$(span).addClass(getClass(position));parent.appendChild(span);return span}function getClass(position){let className="";if(position.top){className+=" tooltip__message--top"}if(position.bottom){className+=" tooltip__message--bottom"}if(position.left){className+=" tooltip__message--left"}if(position.right){className+=" tooltip__message--right"}return className}function showTip(tip,animation){$(tip).css({display:"inline"});setTimeout(function(){$(tip).css(animation)},1)}function hideTip(tip,animation){$(tip).css(animation);setTimeout(function(){$(tip).css({display:"none"})},200)}Livewire?.directive("toastr",function({el,directive,component}){const duration=component.$wire.get("duration");let animations,timeout=null;initToastr(el,{display:"none"});if(component.$wire.get("onRedirect")){animations=new AnimationToastr(component.$wire.get("position"));initToastr(el,animations.init);timeout=openToastr(el,animations,duration,component.$wire)}Livewire?.on("toastr.generate",function(params){animations=new AnimationToastr(params.position);initToastr(el,animations.init);timeout=openToastr(el,animations,duration,component.$wire)});Livewire?.on("toastr.regenerate",function(params){animations=new AnimationToastr(params.position);closeToastr(el,animations.close,component.$wire);if(timeout){window.clearTimeout(timeout)}setTimeout(function(){initToastr(el,animations.init);timeout=openToastr(el,animations,duration,component.$wire)},201)});Livewire?.on("toastr.dismiss",function(params){animations=new AnimationToastr(params.position);closeToastr(el,animations.close,component.$wire)})});function initToastr(el,animation){$(el).css(animation)}function openToastr(el,animations,duration,wire){$(el).css({display:"flex"});setTimeout(function(){$(el).css(animations.open);wire.set("isActive",true)},1);return window.setTimeout(function(){closeToastr(el,animations.close,wire)},duration)}function closeToastr(el,animation,wire){$(el).css(animation);setTimeout(function(){$(el).css({display:"none"});wire.set("isActive",false)},200)}